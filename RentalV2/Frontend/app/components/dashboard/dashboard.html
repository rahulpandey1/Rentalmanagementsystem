<div class="container-fluid">
    <div ng-if="loading" class="loader-overlay">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>Dashboard Overview</h2>
        <button class="btn btn-outline-primary" ng-click="refresh()"><i class="fas fa-sync-alt"></i> Refresh</button>
    </div>

    <!-- Stats Cards -->
    <div class="row g-3 mb-4">
        <div class="col-md-3">
            <div class="card stat-card primary p-3">
                <div class="d-flex justify-content-between">
                    <div>
                        <h6 class="text-muted">Total Rooms</h6>
                        <h3>{{ stats.totalRooms || 0 }}</h3>
                    </div>
                    <div class="text-primary"><i class="fas fa-bed fa-2x"></i></div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card stat-card success p-3">
                <div class="d-flex justify-content-between">
                    <div>
                        <h6 class="text-muted">Available Rooms</h6>
                        <h3>{{ stats.availableRooms || 0 }}</h3>
                    </div>
                    <div class="text-success"><i class="fas fa-door-open fa-2x"></i></div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card stat-card warning p-3">
                <div class="d-flex justify-content-between">
                    <div>
                        <h6 class="text-muted">Occupied Rooms</h6>
                        <h3>{{ stats.occupiedRooms || 0 }}</h3>
                    </div>
                    <div class="text-warning"><i class="fas fa-user-check fa-2x"></i></div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card stat-card danger p-3">
                <div class="d-flex justify-content-between">
                    <div>
                        <h6 class="text-muted">Pending Bills</h6>
                        <h3>{{ stats.overdueBills || 0 }}</h3>
                    </div>
                    <div class="text-danger"><i class="fas fa-exclamation-circle fa-2x"></i></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Financial Summary -->
    <div class="row">
        <div class="col-md-6">
            <div class="card p-3 h-100">
                <h5 class="card-title mb-3">Financial Overview</h5>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        Total Rent Due
                        <span class="badge bg-primary rounded-pill">{{ stats.totalRentDue | currency:'₹' }}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        Total Electric Due
                        <span class="badge bg-warning rounded-pill">{{ stats.totalElectricDue | currency:'₹' }}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center fw-bold">
                        Total Outstanding
                        <span class="badge bg-danger rounded-pill">{{ stats.totalOutstanding | currency:'₹' }}</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center text-success">
                        Total Revenue
                        <span>{{ stats.totalRevenue | currency:'₹' }}</span>
                    </li>
                </ul>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card p-3 h-100">
                <h5 class="card-title mb-3">Occupancy by Floor</h5>
                <div class="mb-2">
                    <label>Ground Floor</label>
                    <div class="progress">
                        <div class="progress-bar" role="progressbar"
                            style="width: {{ (stats.groundFloorOccupied / stats.groundFloorTotal) * 100 }}%">
                            {{ stats.groundFloorOccupied }}/{{ stats.groundFloorTotal }}
                        </div>
                    </div>
                </div>
                <div class="mb-2">
                    <label>First Floor</label>
                    <div class="progress">
                        <div class="progress-bar bg-info" role="progressbar"
                            style="width: {{ (stats.firstFloorOccupied / stats.firstFloorTotal) * 100 }}%">
                            {{ stats.firstFloorOccupied }}/{{ stats.firstFloorTotal }}
                        </div>
                    </div>
                </div>
                <div class="mb-2">
                    <label>Second Floor</label>
                    <div class="progress">
                        <div class="progress-bar bg-warning" role="progressbar"
                            style="width: {{ (stats.secondFloorOccupied / stats.secondFloorTotal) * 100 }}%">
                            {{ stats.secondFloorOccupied }}/{{ stats.secondFloorTotal }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>